<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Qu·∫£n l√Ω b√°c sƒ© - Hy V·ªçng M·ªõi</title>

    <link rel="stylesheet" th:href="@{/css/doctor/doctor.css}" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <body>
    <div class="container">
      <!-- Sidebar -->
      <nav class="sidebar">
        <div class="sidebar-header">
          <h2>üåü Hy V·ªçng M·ªõi</h2>
          <p>H·ªá th·ªëng qu·∫£n l√Ω b√°c sƒ©</p>
        </div>
        <div class="doctor-info">
          <div class="doctor-avatar">BS</div>
          <div class="doctor-details">
            <span th:text="${customer.fullName}"></span>
            <p th:text="${customer != null ? 'Chuy√™n khoa IVF' : ''}">
              Chuy√™n khoa IVF
            </p>
          </div>
        </div>
        <div class="nav-menu">
          <a
            class="nav-item"
            th:classappend="${activePage == 'dashboard' ? 'active' : ''}"
            th:href="@{/doctor/dashboard}"
          >
            <i class="fas fa-tachometer-alt"></i> T·ªïng quan
          </a>
          <a
            class="nav-item"
            th:classappend="${activePage == 'patients' ? 'active' : ''}"
            th:href="@{/doctor/patients}"
          >
            <i class="fas fa-users"></i> B·ªánh nh√¢n
          </a>
          <a
            class="nav-item"
            th:classappend="${activePage == 'examination' ? 'active' : ''}"
            th:href="@{/doctor/examination}"
          >
            <i class="fas fa-clipboard-list"></i> K·∫øt qu·∫£ kh√°m
          </a>
        </div>
      </nav>
    
      <!-- Main -->
      <main class="main-content">
        
         <!-- trang doctor ch·ªó xu·∫•t b√°o c√°oc√°o -->
        <!-- Dashboard -->
        <section
          id="dashboard"
          class="page"
          th:classappend="${activePage == 'dashboard' ? 'active' : ''}"
        >
          <div class="page-header">
            <h1 class="page-title">T·ªïng quan</h1>
            <div class="header-actions">
              <button class="btn btn-outline" th:onclick="@{/export-report}">
                <i class="fas fa-download"></i> Xu·∫•t b√°o c√°o
              </button>
            </div>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-number" th:text="${todayPatients}">--</div>
              <div class="stat-label">B·ªánh nh√¢n h√¥m nay</div>
            </div>
          </div>
        </section>

        <!-- Patients -->
         <!-- Qu·∫£ny l√Ω ng∆∞·ªùi d√πng, b·ªánh nh√¢nnh√¢n -->
        <section
          id="patients"
          class="page"
          th:classappend="${activePage == 'patients' ? 'active' : ''}"
        >
          <div class="page-header">
            <h1 class="page-title">Qu·∫£n l√Ω b·ªánh nh√¢n</h1>
            <div class="header-actions">
              <input
                type="text"
                class="search-input"
                placeholder="T√¨m ki·∫øm b·ªánh nh√¢n..."
                th:value="${searchTerm}"
              />
              <button class="btn btn-primary" th:onclick="@{/patients/add}">
                <i class="fas fa-plus"></i> Th√™m
              </button>
            </div>
          </div>

          <div class="patient-card" th:each="patient : ${patients}">
            <div class="patient-header">
              <div class="patient-basic-info">
                <div class="patient-avatar-small" th:text="${patient.initials}">
                  NL
                </div>
                <div>
                  <div class="patient-name" th:text="${patient.name}">
                    Nguy·ªÖn Th·ªã Lan
                  </div>
                  <div
                    class="appointment-time"
                    th:text="${patient.appointmentTime}"
                  >
                    08:30 - T√°i kh√°m
                  </div>
                </div>
              </div>
              <div
                class="appointment-status status-upcoming"
                th:text="${patient.status}"
              >
                ƒêang ch·ªù
              </div>
            </div>

            <div class="patient-details-grid">
              <div class="detail-item">
                <span class="detail-label">Tu·ªïi:</span
                ><span class="detail-value" th:text="${patient.age}">32</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">ƒêi·ªán tho·∫°i:</span
                ><span class="detail-value" th:text="${patient.phone}"
                  >0901***</span
                >
              </div>
            </div>
          </div>
        </section>

        <!-- Examination -->
         <!-- l·ªãch tr√¨nh ƒëi·ªÅu tr·ªã -->
        <section
          id="examination"
          class="page"
          th:classappend="${activePage == 'examination' ? 'active' : ''}"
        >
          <div class="page-header">
            <h1 class="page-title">Ghi nh·∫≠n k·∫øt qu·∫£ kh√°m</h1>
          </div>

          <form
            class="exam-form"
            id="examinationForm"
            th:action="@{/examination/submit}"
            method="post"
          >
            <div class="form-title">
              <i class="fas fa-clipboard-list"></i> Nh·∫≠p k·∫øt qu·∫£ kh√°m
            </div>

            <div class="form-grid">
              <div class="form-group">
                <label for="examDate">Ng√†y kh√°m</label>
                <input
                  type="date"
                  id="examDate"
                  name="examDate"
                  th:value="${examDate}"
                  required
                />
              </div>
              <div class="form-group">
                <label for="examType">Lo·∫°i kh√°m</label>
                <select id="examType" name="examType" required>
                  <option value="">Ch·ªçn lo·∫°i kh√°m</option>
                  <option
                    value="ultrasound"
                    th:selected="${examType == 'ultrasound'}"
                  >
                    Si√™u √¢m
                  </option>
                  <option
                    value="blood_test"
                    th:selected="${examType == 'blood_test'}"
                  >
                    X√©t nghi·ªám m√°u
                  </option>
                  <option
                    value="hormone"
                    th:selected="${examType == 'hormone'}"
                  >
                    X√©t nghi·ªám hormone
                  </option>
                  <option
                    value="consultation"
                    th:selected="${examType == 'consultation'}"
                  >
                    T∆∞ v·∫•n
                  </option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="examResults">K·∫øt qu·∫£ kh√°m</label>
              <textarea
                id="examResults"
                name="examResults"
                rows="5"
                th:text="${examResults}"
                placeholder="Nh·∫≠p k·∫øt qu·∫£ chi ti·∫øt..."
              ></textarea>
            </div>

            <div class="form-grid">
              <div class="form-group">
                <label for="importantValues">Ch·ªâ s·ªë quan tr·ªçng</label>
                <input
                  type="text"
                  id="importantValues"
                  name="importantValues"
                  th:value="${importantValues}"
                  placeholder="VD: FSH: 8.5, LH: 12.3"
                />
              </div>
              <div class="form-group">
                <label for="examNotes">Ghi ch√∫</label>
                <input
                  type="text"
                  id="examNotes"
                  name="examNotes"
                  th:value="${examNotes}"
                  placeholder="Ghi ch√∫ th√™m..."
                />
              </div>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn-submit">L∆∞u k·∫øt qu·∫£</button>
            </div>
          </form>
        </section>
      </main>
    </div>

    <div class="modal" id="patientModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Chi ti·∫øt b·ªánh nh√¢n</h2>
          <span class="close">√ó</span>
        </div>
        <div class="modal-body">
          <p th:utext="${patientDetails}">
            Th√¥ng tin chi ti·∫øt s·∫Ω ƒë∆∞·ª£c t·∫£i t·∫°i ƒë√¢y.
          </p>
        </div>
      </div>
    </div>

    <script th:src="@{/js/doctor/doctor.js}"></script>
  </body>
</html>
